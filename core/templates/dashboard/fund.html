{% extends 'base.html' %}
{% block content %}
<h2>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Ñ–æ–Ω–¥–∞</h2>
<a href="{% url 'create_task' %}"><button>–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button></a>

<a href="{% url 'leave_review' %}">
    <button>–û—Ü–µ–Ω–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞</button>
</a>

<h3>–í–∞—à–∏ –∑–∞–¥–∞–Ω–∏—è:</h3>
{% for task in tasks %}
    <div style="border: 1px solid #ccc; margin-bottom: 20px; padding: 10px;">
        <h4>{{ task.title }}</h4>
        <p>{{ task.description }}</p>
        <p><strong>–ü—Ä–∏–Ω—è–ª–∏ –≤–æ–ª–æ–Ω—Ç—ë—Ä—ã:</strong></p>
        <ul>
            {% for v in task.volunteers.all %}
                <li>{{ v.username }}</li>
            {% empty %}
                <li>–ù–∏–∫—Ç–æ –Ω–µ –ø—Ä–∏–Ω—è–ª</li>
            {% endfor %}
        </ul>
        <p><strong>–ü–æ–¥–¥–µ—Ä–∂–∞–ª–∏ —Å–ø–æ–Ω—Å–æ—Ä—ã:</strong></p>
        <ul>
            {% for s in task.sponsors.all %}
                <li>{{ s.username }}</li>
            {% empty %}
                <li>–ù–∏–∫—Ç–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∞–ª</li>
            {% endfor %}
        </ul>
    </div>
{% empty %}
    <p>–í—ã –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.</p>
{% endfor %}

<hr>

<h3>–û—Ç–∑—ã–≤—ã –æ –≤–∞—Å:</h3>
<ul>
    {% for review in user.received_reviews.all %}
        <li>
            <strong>{{ review.author.username }}</strong>: 
            –û—Ü–µ–Ω–∫–∞: {{ review.rating }} ‚Äî {{ review.comment }}
        </li>
    {% empty %}
        <li>–û—Ç–∑—ã–≤–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</li>
    {% endfor %}
</ul>

<hr>

<h3>–í–∞—à–∏ –æ—Ç–∑—ã–≤—ã –æ–± —É—á–∞—Å—Ç–Ω–∏–∫–∞—Ö:</h3>
<ul>
    {% for review in user.written_reviews.all %}
        <li>
            <strong>{{ review.target.username }}</strong>: 
            –û—Ü–µ–Ω–∫–∞: {{ review.rating }} ‚Äî {{ review.comment }}
            <br>
            <a href="{% url 'edit_review' review.id %}">‚úè –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a> |
            <a href="{% url 'delete_review' review.id %}">üóë –£–¥–∞–ª–∏—Ç—å</a>
        </li>
    {% empty %}
        <li>–í—ã –µ—â—ë –Ω–∏–∫–æ–≥–æ –Ω–µ –æ—Ü–µ–Ω–∏–ª–∏.</li>
    {% endfor %}
</ul>
{% endblock %}